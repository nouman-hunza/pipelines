# Pipeline

This project contains Jenkins declarative pipeline as Jenkinsfile. The pipeline does the following.
* Clone the git repo from ```https://github.com/nouman-hunza/repoA.git``` which is fork of ```https://github.com/grpc/grpc```
* Create doxygen config file and update the following default properties.

  *  INPUT = src                 (set the input source folder where doxygen scan for files)
  *  RECURSIVE = YES             (scan source folder recursively for sub directories)
  *  GENERATE_HTML = YES         (generate doxygen output as HTML, this will create a directory containing main index.html file to view generated docs)
  *  WARN_LOGFILE = ${WARN_FILE} (set the log file instead of stdout where doxygen emmits log entries, this is set through jenkins environment var WARN_FILE)
  *  WARN_FORMAT  = $line<delimeter>$file<delimeter>$text (this set the format of log line entry, this format also feed to parser to correctly parse)

* Run doxygen with the config file created through last step.
* Clone the git repo from ```https://github.com/nouman-hunza/repoC.git``` which is python parser for doxygen warning log file into ```parser``` directory.
* Run the python parser from ```parser``` direcoty and input the doxygen warn file through environment variable ${WARN_FILE} 
* Archive the csv generated by parser

# Extending the pipelineB

Since this pipeline extends some functionality from [pipelineB](https://github.com/nouman-hunza/pipelines/blob/taskB/Jenkinsfile) Therefore best pattern was to reuse the pipelineB.

Stanard approach is to use shared libraries in Jenkins, However as it was explicitly mentioned that I couldn't use shared libraries therefore I consider following approach to tackle this (none of it was implemented as this was out of scope of this assignment)

* Using shared library

* Using a single Jenkinsfile for both pipelines and based on Paremeter stages can be different for each pipeline. (As it was mentioned in the assignment requirement that I need to make two Jenkinsfile therefore I didnt implement this, but this is still an approach that can be taken)

* run pipelineB from pipelineC with a special parameter to indicate that create warning file. We could then use this warning file in pipelineC for parsing. This can be done by sharing a special [plugin](https://github.com/jenkinsci/external-workspace-manager-plugin/blob/master/doc/PIPELINE_EXAMPLES.md#workspace-reuse-in-two-different-jobs) or by uploading artifact in pipelineB and use it in pipelineC by using ```copyArtifacts``` declarative.  
